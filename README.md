## 交错战线AutoScript
基于Python的 交错战线 自动化脚本

***【要写论文，该项目作者已停止更新】  —— 有缘再见:rocket:***

***

- [交错战线AutoScript](#交错战线autoscript)
  - [主要功能](#主要功能)
  - [次要功能](#次要功能)
  - [雷电模拟器特供功能](#雷电模拟器特供功能)
  - [实现原理](#实现原理)
  - [如何使用](#如何使用)
  - [软件界面 Ver-0.1.2A](#软件界面-ver-012a)
  - [拷贝仓库须注意](#拷贝仓库须注意)
  - [构建软件](#构建软件)
    - [软件第三方依赖 requirements](#软件第三方依赖-requirements)


### 主要功能
- 检测式启动游戏（若由此脚本启动游戏，会自动签到）
- 自动提交交易所订单（可以自定义只换取哪些订单，以及是否启用自动合成）
- 周本，自动刷取每周通关虚影奖励微晶（阿瑞斯/宙斯，一号预设队伍/二号预设队伍）
- 使用虚影给队员刷好感（新号需通关一次阿瑞斯，自定义队伍1~8号队伍，自定义通关次数）
- 竞技场挑战（使用OCR进行战力识别，需要设置战力挑战阈值【默认25000】）

### 次要功能
**（由于不是常用功能，可能还存在一些问题暂未解决，可以查看软件内帮助文档以正常使用）**
- 使用小号给大号刷助战奖励（4w星币×2）【软件没有ocr，所以小号只能有大号一个好友】
- 自动同意好友申请【极低概率触发bug，牢交的好友申请问题】
- 矿场自动化挂机【没有自定义菜单，只能看帮助文档】
- 矿场计算器，计算矿场配队方案得分及其详情【没有对配队输入进行限制，如果你选五个安抚精英的话，软件会卡死[doge]】
- 任务编辑器：将一系列任务通过自定义顺序依次执行

### 雷电模拟器特供功能

【启动模拟器】与【关闭模拟器】

- 将脚本属性中更改为【以管理员身份运行】
- 将脚本中adb路径修改为雷电模拟器目录下的adb.exe路径，保存配置后再打开任务编辑器会多出一项添加项【关闭模拟器】。如果没有，请重启软件
- 【启动模拟器】是自检测式的功能，检测到当前模拟器未运行，会自动启动模拟器，然后进行操作

注意：此功能需要获取模拟器与设备的对应关系，所以以管理员运行在指定雷电adb路径以后至少有一次手动打开模拟器，并运行软件刷新设备列表，获取对应关系，并且这是一个实验性功能，可能会有bug

### 实现原理

- 原生adb截取屏幕（约0.8s+，较慢），模拟操作
- cv2进行图像识别（模板匹配）
- OCR图像文字识别（PaddleOCR）

### 如何使用
尽量使用雷电模拟器，打开adb本地调试

MuMu模拟器需要在设置-网络-打开桥接模式，打开adb调试模式

**注意**：脚本与远程软件并不兼容，会导致脚本崩溃，雷电模拟器需关闭无界趣连。MuMu需卸载GameView，并重启电脑

请在[https://github.com/Amber-siley/JCZXAutoScript/releases](https://github.com/Amber-siley/JCZXAutoScript/releases)下载最新版本
1. 已测试分辨率，如遇“未找到按钮……”同时游戏不能正常被脚本操作，请尝试修改分辨率
   - 1920×1080(dpi 280)
   - 2400×1080(dpi 320)
2. 关于运行时遇到的问题（如bug，卡死，崩溃），请提issue，需要详尽的描述，以及软件目录下的JCZXAutoScriptLog.log日志文件

### 软件界面 Ver-0.1.2A
![功能1](/screenshot/主界面功能1.png)
![功能2](/screenshot/功能2.png)
![图表](/screenshot/图表.png)
![帮助](/screenshot/帮助.png)

### 拷贝仓库须注意
- #### Windows平台
需创建软连接，因为运行目录中找不到resources文件夹,或者在仓库目录下/jczx目录运行jczx.py
```
mklink /J .\resources .\jczx\resources
```

### 构建软件
在仓库目录下使用```python build.py```运行构建脚本，```build.py```会自动检查并创建```python```虚拟环境并安装依赖进行构建脚本任务
#### 软件第三方依赖 requirements
```
# Main
pyqt6
opencv-python
numpy
requests
paddlepaddle
paddleocr

# build.py
pick
pyinstaller
nuitka
```
***注意：*** 软件环境需要自己搭建，打包需安装pyinstaller或nuitka

***两种构建方式差异：*** pyinstaller打包速度很快，软件包较大。nuitka打包速度非常慢，软件包较小